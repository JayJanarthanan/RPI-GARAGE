<!DOCTYPE html>
<html>
	<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src='/socket.io/socket.io.js'></script>
	<script>
		var socket = io();

		socket.on('welcome', function(data) {
			addMessage(data.message);
			// Respond with a message including this clients' id sent from the server
			socket.emit('i am client', {data: 'foo!', id: data.id});
		});
		socket.on('status', function(data) {
			addMessage(data.status);
		});
		
		function addMessage(message) {
			var text = document.createTextNode(message),
				status = document.getElementById('status');

			status.innerHTML = message;
		}
	</script>
	<script>
	function post(url) {
		var request = new XMLHttpRequest();
		request.open('POST', url, true);
		request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
		request.send({});
	}
	function open() { post("/api/garage/open"); }
	</script>		

	</head>

	<body>
		<div class="container">
			<header>
			   <h1>Jana Garage</h1>
			</header>
			<section>
				<h1>Status</h1>
				
				<h2 id='status'>UNKNOWN</h2>

				<button onclick="open()" name="OPEN"> Operate Door </button>
				
				<h2>Visual</h2>
				
			</section>
			
			<section>
				<h1> Other Details </h1>
				<p> Temperature </p>
				<p> Time </p>
				<p> Sensor Range </p>
			</section>
			
			<footer>Last updated 14 April 2017.</footer>
		</div>
	</body>
</html>
